{
  "info": {"version": "1.0.0", "title": "Service Catalog API"},
  "paths": {
    "/rest/apps":{
      "get": {
        "operationId": "get_filtered_applications",
          "parameters": [
            {"name": "space", "in": "query", "type": "string"},
            {"name": "service_label", "in": "query", "type": "string"}
          ],
          "responses": {"200": {"description": "OK", "schema": {"type": "array", "items": {"$ref": "Applications"}}}}
      }
    },
    "/rest/apps/{app_guid}": {
      "get": {
        "operationId": "get_app_details",
        "parameters": [{"name": "app_guid", "in": "path", "required": "true", "type": "string"}],
        "responses": {"200": {"schema": {"$ref": "ApplicationDetails"}}}
      },
      "delete": {
        "operationId": "delete_app",
          "parameters": [
            {"name": "app_guid", "in": "path", "type": "string"},
            {"name": "cascade", "in": "query", "type": "boolean"}
          ],
          "responses": {"200": {"description": "OK", "schema": {"type": "string"}}}
      }
    },
    "/rest/service_instances":{
      "get": {
        "operationId": "get_service_instances",
          "parameters": [
              {"name": "broker", "in": "query", "required": "false", "type": "string"},
              {"name": "space", "in": "query", "required": "true", "type": "string"}
          ],
          "responses": {"200": {"description": "OK", "schema": {"$ref": "ServiceInstancesList"}}}
      },
      "post": {
        "operationId": "create_service_instance",
        "parameters": [
          {"name": "body", "in": "body", "required": "true", "schema": {"$ref": "NewServiceInstanceRequest"}}
        ],
        "responses": {
          "200": {"description": "OK", "schema": {"type": "string"}},
          "500": {"description": "Internal Server Error", "schema": {"type": "string"}}
        }
      }
    },
    "/rest/service_instances/{instance}":{
      "delete": {
        "operationId": "delete_service_instance",
        "parameters": [{"name": "instance", "in": "path", "required": "true", "type": "string"}],
        "responses": {"200": {"description": "OK", "schema": {"type": "string"}}}
      }
    },
    "/rest/services": {
      "get": {
        "operationId": "get_marketplace_services",
        "parameters": [{"name": "space", "in": "query", "type": "string"}],
        "responses": {"200": {"description": "OK", "schema": {"$ref": "ServiceInstanceListResponse"}}}
      }
    },
    "/rest/services/{service_guid}": {
      "get": {
        "operationId": "get_service",
        "parameters": [{"name": "service_guid", "in": "path", "type": "string"}],
        "responses": {"200": {"description": "OK", "schema": {"$ref": "ServiceInstanceDetails"}}}
      }
    }
  },
  "definitions": {
    "Applications":{
      "properties": {
        "guid":  {"type": "string"},
        "urls": {"type": "array", "items": {"type": "string"}},
        "name":  {"type": "string"},
        "state": {"type": "string"},
        "running_instances": {"type": "integer", "format": "int32"},
        "service_names": {"type": "array", "items": {"type": "string"}}
      }
    },
    "ApplicationDetails": {
      "properties": {
        "guid": {"type": "string"},
        "name": {"type": "string"},
        "memory": {"type": "integer", "format": "int32"},
        "instances": {"type": "integer", "format": "int32"},
        "disk_quota": {"type": "integer", "format": "int32"},
        "space_guid": {"type": "string"},
        "stack_guid": {"type": "string"},
        "state": {"type": "string"},
        "command": {"type": "string"},
        "buildpack": {"type": "string"},
        "health_check_timeout": {"type": "string"},
        "environment_json": {"type": "string"},
        "detected_buildpack": {"type": "string"},
        "detected_buildpack_guid": {"type": "string"},
        "package_state": {"type": "string"},
        "package_updated_at": {"type": "string"},
        "system_env_json": {"type": "string"},
        "staging_task_id": {"type": "string"},
        "running_instances": {"type": "integer", "format": "int32"},
        "available_domain": {"type": "string"},
        "routes": {"type": "array", "items": {"$ref": "ApplicationRoute"}},
        "version": {"type": "string"},
        "services": {"type": "array", "items": {"$ref": "ServiceInstance"}}
      }
    },
    "ApplicationRoute": {
      "properties": {
        "guid": {"type": "string"},
        "host": {"type": "string"},
        "domain": {"properties": {"guid": {"type": "string"}, "name": {"type": "string"}}}
      }
    },
    "ServiceInstancesList": {
      "type": "array",
      "items": {
        "properties": {
          "guid": {"type": "string"},
          "name": {"type": "string"},
          "service": {"type": "string"},
          "service_plan": {"type": "string"},
          "bound_apps": {"type": "array", "items": {
            "properties": {
              "guid": {"type": "string"},
              "name": {"type": "string"}
            }
          }}
        }
      }
    },
    "ServiceInstance": {
      "properties": {
        "guid": {"type": "string"},
        "name": {"type": "string"},
        "service_plan": {"properties": {
            "name": {"type": "string"},
            "service": {"properties": {"guid": {"type": "string"}, "label": {"type": "string"}}}}
        },
        "dashboard_uri": {"type": "string"},
        "bound_app_count": {"type": "integer", "format": "int32"}
      }
    },
    "NewServiceInstanceRequest": {
      "properties": {
        "name": {"type": "string"},
        "organization_guid": {"type": "string"},
        "parameters": {"properties": {"name": {"type": "string"}}},
        "service_plan_guid": {"type": "string"},
        "space_guid": {"type": "string"}
      }
    },
    "ServiceInstanceListResponse": {
      "properties": {
        "total_results":  {"type": "integer", "format": "int32"},
        "total_pages": {"type": "integer", "format": "int32"},
        "prev_url": {"type": "string"},
        "next_url": {"type": "string"},
        "resources": {"type":"array", "items":{"$ref": "ServiceInstanceDetails"}}
      }
    },
    "ServiceInstanceDetails": {
      "properties": {
        "metadata": {"$ref": "Metadata"},
        "entity": {
          "properties": {
            "label":  {"type": "string"},
            "provider": {"type": "string"},
            "url":  {"type": "string"},
            "description":  {"type": "string"},
            "long_description": {"type": "string"},
            "version":  {"type": "string"},
            "info_url": {"type": "string"},
            "active":  {"type": "boolean"},
            "bindable": {"type": "boolean"},
            "unique_id":  {"type": "string"},
            "extra": {"type": "string"},
            "tags": {"type": "array", "items": {"type": "string"}},
            "requires": {"type": "array", "items": {"type": "string"}},
            "documentation_url":  {"type": "string"},
            "service_broker_guid": {"type": "string"},
            "plan_updateable":  {"type": "boolean"},
            "service_plans_url": {"type": "string"},
            "service_plans": {"type": "array", "items": {"$ref": "ServicePlan"}}
          }
        }
      }
    },
    "Metadata": {
      "properties": {
        "guid":  {"type": "string"},
        "url": {"type": "string"},
        "created_at":  {"type": "string"},
        "updated_at": {"type": "string"}
      }
    },
    "ServicePlan": {
      "properties": {
        "metadata":  {"$ref": "Metadata"},
        "entity": {
          "properties": {
            "name": {"type": "string"},
            "free": {"type": "boolean"},
            "description": {"type": "string"},
            "service_guid": {"type": "string"},
            "extra": {"type": "string"},
            "unique_id": {"type": "string"},
            "public": {"type": "boolean"},
            "active": {"type": "boolean"},
            "service_url": {"type": "string"},
            "service_instances_url": {"type": "string"}
          }
        }
      }
    }
  },
  "security": [{"default": []}],
  "swagger": "2.0"
}
